---
sidebar_position: 1
sidebar_label: Global ID
description: Use the Relay Global ID specification to encode the type and ID of an object in a single string.
keywords:
  - hasura
  - relay
  - graphql
  - global id
---

# Hasura Global ID

## Introduction

Hasura's global ID can be used to provide options for GraphQL clients to elegantly handle for caching and data
refetching in a standardized way.

The GraphQL schema generated by Hasura provides a standard mechanism to retrieve an object using this global ID and
also, in the response the schema provides a standard way of providing these global IDs.

```graphql
{
  user_by_id(user_id: 1) {
    id // Global ID
    user_id
    name
  }
  node(id: "eyJ2ZXJzaW9uIjoxLCJ0eXBlbmFtZSI6IkFydGljbGUiLCJpZCI6eyJhcnRpY2xlX2lkIjoyfX0=") {
    id
    ... on User {
      name
    }
  }

}
```

An example of getting the global ID for the `User` object corresponding to `user_id = 1` and retrieving the same object
using the global ID.

## Open DDS object reference schema

The JSON schema to enable generate global ID for a `Object` type, the `Object` type needs to specify the fields of the
Object type that will uniquely identify an object of that type.

The following is the JSON schema of the `Object` type.

```json
{
  "description": "Definition of a user-defined GDS object type.",
  "type": "object",
  "required": ["fields", "kind", "name"],
  "properties": {
    "fields": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/FieldDefinition"
      }
    },
    "globalID": {
      "type": ["array", "null"],
      "items": {
        "$ref": "#/definitions/FieldName"
      }
    },
    "kind": {
      "type": "string",
      "enum": ["objectType"]
    },
    "name": {
      "$ref": "#/definitions/TypeName"
    }
  }
}
```

### JSON schema of the related types

1. `FieldDefinition`

```json
{
  "description": "The definition of a field in a user-defined object type.",
  "type": "object",
  "required": ["name", "type"],
  "properties": {
    "name": {
      "$ref": "#/definitions/FieldName"
    },
    "type": {
      "$ref": "#/definitions/Type"
    }
  }
}
```

2. `FieldName`

```json
{
  "description": "The name of a field in a user-defined object type.",
  "type": "string"
}
```

3. `Type`

```json
{
  "description": "Types track the valid representations of values as JSON",
  "oneOf": [
    {
      "description": "A named type",
      "type": "object",
      "required": ["name", "type"],
      "properties": {
        "name": {
          "description": "The name can refer to a primitive type or a scalar type",
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["named"]
        }
      }
    },
    {
      "description": "A nullable type",
      "type": "object",
      "required": ["type", "underlying_type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["nullable"]
        },
        "underlying_type": {
          "description": "The type of the non-null inhabitants of this type",
          "allOf": [
            {
              "$ref": "#/definitions/Type"
            }
          ]
        }
      }
    },
    {
      "description": "An array type",
      "type": "object",
      "required": ["element_type", "type"],
      "properties": {
        "element_type": {
          "description": "The type of the elements of the array",
          "allOf": [
            {
              "$ref": "#/definitions/Type"
            }
          ]
        },
        "type": {
          "type": "string",
          "enum": ["array"]
        }
      }
    }
  ]
}
```

## Example

Let's consider the following `article` object and let's assume the `article_id` field uniquely identifies an article.

```json
{
  "kind": "objectType",
  "name": "article",
  "fields": [
    {
      "name": "article_id",
      "type": "Int"
    },
    {
      "name": "title",
      "type": "String"
    },
    {
      "name": "author_id",
      "type": "Int"
    }
  ]
}
```

We need to add the `article_id` field in the `globalID`.

```json
{
  "kind": "objectType",
  "name": "article",
  "fields": [
    {
      "name": "article_id",
      "type": "Int"
    },
    {
      "name": "title",
      "type": "String"
    },
    {
      "name": "author_id",
      "type": "Int"
    }
  ],
  "globalID": ["article_id"]
}
```

Next, we need to choose the model that implements the `article` object type to be the global ID source for the object
type `article`. This can be done by adding `globalIDSource: true` in the model's definition.

Note that, for an object type to generate a global field, it should not have any field named `id`, because it will be
generated automatically.

```json
{
  "kind": "model",
  "name": "Articles",
  "dataType": "article",
  "globalIDSource": true
}
```

Note that, multiple models can implement the same object type, but only one model out of those models can be the global
ID source of the object type.

With the above changes, the following GraphQL schema will be generated.

```graphql
interface Node {
  id: ID!
}

type Articles implements Node {
  article_id: Int!
  title: String!
}
```
